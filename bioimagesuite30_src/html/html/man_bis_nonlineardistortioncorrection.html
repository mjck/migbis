<HTML><HEAD><TITLE>BioImage Suite - bis_nonlineardistortioncorrection </TITLE></HEAD><BODY>
<H2><CENTER><a href="index.html">BioImage Suite Command Line Tools</a></CENTER></H2>
<font size="2" >
<br> <br><H3>NAME</H3>
bis_nonlineardistortioncorrection.tcl --Computes non-linear distortion corrections for echoplanar images.
<br> <br><H3>SYNOPSIS</H3>
</font>
<font size="3" >
<PRE><B>bis_nonlineardistortioncorrection.tcl</B>[--inp ] [--inp2 ] [--inp3 ] [--inp4 ] <br>	[--inp5 ] [--out ] [--out2 ] [--initialmode ] [--spacing ] <br>	[--spacingrate ] [--smoothness ] [--dir ] [--windowsize ] [--extralevels ] <br>	[--resolution ] [--stepsize ] [--numberoflevels ] [--metric ] [--iterations ] <br>	[--resolutionrate ] [--autonormalize ] [--optimization ] [--numberofbins ] [--numberofsteps ] <br>	[--guiautosave ] [--reslimage ] [--useweightimage ] [--dogui ] [--pset ] <br>	[--slicermode ] [--loni ] [--ctest ] [--ctestline ] [--ctestsave ] <br>	[--ctesttmpdir ] [--ctestexact ] [--ctestthr ] [--ctestdebug ] [--ctestcreategold ] <br>	[--ctestgui ] </PRE>
</font>
<font size="2" >
<br> <br><H3>DESCRIPTION</H3>
bis_nonlineardistortioncorrection.tcl Computes non-linear distortion corrections for echoplanar images. This is essentially one-dimensional non-rigid registration. Computes linear registration first, non-linear registration second. 
 <BR> <BR><B><span style="color: red;">[Inputs]</span></B><br> <b>reference_image</b> (command line option --inp) : Reference Image <br> <b>transform_image</b> (command line option --inp2) : Transform Image <br> <b>initial_transform</b> (command line option --inp3) : Initial Transformation <br> <b>weight_image</b> (command line option --inp4) : Reference Weight Image <br> <b>weight_image2</b> (command line option --inp5) : Transform Weight Image  <BR> <BR><B><span style="color: red;">[Outputs]</span></B> <br> <b>output_transform</b> (command line option --out) : Output Transformation  <br> <b>output_image</b> (command line option --out2) : Transformed Image  <BR> <BR><B><span style="color: red;">[Options]</span></B> <br> <b>initialmode</b>  : Type of initial registration. Default value is "rigid". Allowed values = [ none, rigid, affine, similarity ] <br> <b>spacing</b>  : Control Point Spacing in mm. Default value is "20.0". Allowed range is from 1.0 to 50.0  <br> <b>spacingrate</b>  : Rate of increase of Control Point Spacing. Default value is "2.0". Allowed range is from 1.1 to 3.0  <br> <b>smoothness</b>  : Smoothness factor (using bending energy regularization). Default value is "0.005". Allowed range is from 0.0 to 1.0  <br> <b>dir</b>  : phase encode direction 0=x, 1=y, or 2=z. Default value is "1". Allowed range is from 0 to 2  <br> <b>windowsize</b>  : Size (in control points of the window to use for computing gradients (2.0=full,1.0=accelerated). Default value is "1.0". Allowed range is from 1.0 to 2.0  <br> <b>extralevels</b>  : Number of `fluid' iterations at end of main level . Default value is "0". Allowed range is from 0 to 10  <br> <b>resolution</b>  : resolution . Default value is "2.0". Allowed range is from 0.5 to 10.0  <br> <b>stepsize</b>  : step size . Default value is "3.0". Allowed range is from 0.1 to 5.0  <br> <b>numberoflevels</b>  : number of multiresolution levels. Default value is "3". Allowed range is from 1 to 5  <br> <b>metric</b>  : Similarity Metric. Default value is "NMI". Allowed values = [ SSD, CC, MI, NMI, JE ] <br> <b>iterations</b>  : Number of iterations . Default value is "15". Allowed range is from 1 to 50  <br> <b>resolutionrate</b>  : Rate at which to decrease the resolution. Default value is "2". Allowed range is from 1.05 to 3.0  <br> <b>autonormalize</b>  : Autonormalize Intensities (i.e. staturate between 1% and 99% of intensity range). Default value is "1". Allowed values are either 0 (Off) or 1 (On) <br> <b>optimization</b>  : Optimization Method. Default value is "default". Allowed values = [ default, SlowClimb, GradientDescent, ConjugateGradient, Hybrid ] <br> <b>numberofbins</b>  : Number of bins for the joint histogram. Default value is "64". Allowed range is from 32 to 1024  <br> <b>numberofsteps</b>  : Number of steps/level for the optimization. Default value is "1". Allowed range is from 1 to 5  <br> <b>reslimage</b>  : Output a resliced image, or  a red-green blend image, or no  resliced image. Default value is "Resliced". Allowed values = [ Resliced, ColorBlend ] <br> <b>useweightimage</b>  : Weighted Registrations (0=none,1=ref only,2=both ref and target weights). Default value is "0". Allowed values = [ 0, 1, 2 ] <BR> <BR><B><span style="color: red;">[Common Options]</span></B> <br> <b>dogui</b>  : Enable the creation of a graphical user interface. Default value is "0". Allowed values are either 0 (Off) or 1 (On) <br> <b>pset</b>  : Use Parameter set to set parameters. Default value is "".  <br> <b>slicermode</b>  : This signifies that the algorithm is being invoked by Slicer. It affects default save formats.. Default value is "0". Allowed values are either 0 (Off) or 1 (On) <br> <b>loni</b>  : Create xml output  for loni pipeline and exit (1=module group,2=module). Default value is "0". Allowed range is from 0 to 2  <br> <b>ctest</b>  : Enable the running of ctest automated testing. If argument is specified then the script is invoked in test mode and using the argument as the text file containing the test definitions. Default value is "0".  <BR> <BR><B><span style="color: red;">[Software Testing Options]</span></B> <br> <b>ctestline</b>  : (Use only in software testing mode) If set to a positive integer then the only test that is run corresponds to the appropriate line in the testfile. Default value is "-1". Allowed range is from -1 to 9999  <br> <b>ctestsave</b>  : (Use only in software testing mode) If enabled then save results of computation otherwise discard after testing is performed. Default value is "0". Allowed values are either 0 (Off) or 1 (On) <br> <b>ctesttmpdir</b>  : (Use only in software testing mode) Output directory to save temporary output testing files, if not set default filenames are generated from the input filenames. Default value is "".  <br> <b>ctestexact</b>  : (Use only in software testing mode) If enabled then comparison is done via subtraction else correlation (images) or correspondence error (surfaces) is used. Default value is "1". Allowed values are either 0 (Off) or 1 (On) <br> <b>ctestthr</b>  : (Use only in software testing mode) Threshold for subtraction or correlation. Default value is "0.002". Allowed range is from 0 to 100000  <br> <b>ctestdebug</b>  : (Use only in software testing mode) If set to non empty then a textfile is created with debug output. Default value is "".  <br> <b>ctestcreategold</b>  : (Use only in software testing mode) If set to 9999 then the test saves its result as a gold standard. Use with extreme care. Default value is "0". Allowed range is from 0 to 9999  <br> <b>ctestgui</b>  : (Use only in software testing mode) If set to 1 then the testing is done in GUI mode and the comparison is based on the viewer output. Default value is "0". Allowed range is from 0 to 1  
<br> <br><H3>BACKWARD COMPATIBILITY ISSUES</H3>
Refactored from pxmat_register.tcl.
<br> <br><H3>Authors</H3>
hirohito.okuda@yale.edu,xenophon.papademetris.yale.edu
<br>

<HR><CENTER><A HREF="index.html" NAME="Back to index">[Return to Command Line Tools Index]</A></CENTER>
</font>
</BODY></HTML>
